<div class="container-fluid" style="padding: 0% 5%">
  <h1><%= @group.name %> <%= @users.length %>/<%= @group.size %></h1>
  <% if @in_group %>
    <ul>
      <% @users.each do |user| %>
        <li><h3><%= user.first_name %> <%= user.last_name %></h3></li>
      <% end %>
    </ul>
    <% if @users.length < @group.size and @requests.any? %>
      <h1>Requests</h1>
      <% @requests.each do |request| %>
        <% user = request.user %>
        <li>
          <h3>Request from: <%= user.first_name %> <%= user.last_name %></h3>
          <%= link_to "Accept request", add_member_group_path(@group, user_id: user.id, request_id: request.id), method: :post, class: "btn btn-primary" %>
        </li>
      <% end %>
    <% end %>
    <h1>Tasks</h1>
    <ul class="tasks-list">
      <% @tasks.each do |task| %>
        <li id="task-<%= task.id %>" class="task-item">
          <h3><%= task.name %></h3>
          <h5><%= task.description %></h5>
          <h5>Task for: <%= task.user.first_name %> <%=task.user.last_name %></h5> 
          <h5 id="task-completion">Completed: <%= task.completed %></h5>
          <% if not task.completed %>
            <%= link_to "Completed task!", group_task_path(@group, task, completed: true), method: :put, class: "btn btn-success" %>
          <% else %>
            <%= link_to "Un-complete task", group_task_path(@group, task, completed: false), method: :put, class: "btn btn-warning" %>
          <% end %>
          <%= link_to "Delete task :(", group_task_path(@group, task), method: :delete, class: "btn btn-danger" %>
        </li>
      <% end %>
    </ul>
    <%= link_to "New task", new_group_task_path(@group), class: "btn btn-primary" %>
    <script>
      $(function() {
        $(".tasks-list").sortable({
           distance:20
        });
     });
    </script>
  <% else %>
    <%= render "groups/join_group" %>
  <% end %>
</div>
